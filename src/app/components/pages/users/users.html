<div class="container mt-4">

  <h3 class="mb-3">
    <i class="bi bi-people-fill"></i> Users
  </h3>

  <!-- Search -->
  <div class="mb-3">
    <input
      type="text"
      class="form-control"
      placeholder="Search..."
      [(ngModel)]="searchText"
      (ngModelChange)="page = 1"
    />
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr>
          <th (click)="changeSort('id')" style="cursor:pointer">
            ID
            <i class="bi"
               [ngClass]="{
                 'bi-sort-up': sortColumn==='id' && sortDirection==='asc',
                 'bi-sort-down': sortColumn==='id' && sortDirection==='desc',
                 'bi-arrow-down-up': sortColumn!=='id'
               }"></i>
          </th>

          <th (click)="changeSort('name')" style="cursor:pointer">
            Name
            <i class="bi"
               [ngClass]="{
                 'bi-sort-up': sortColumn==='name' && sortDirection==='asc',
                 'bi-sort-down': sortColumn==='name' && sortDirection==='desc',
                 'bi-arrow-down-up': sortColumn!=='name'
               }"></i>
          </th>

          <th>Email</th>

          <th (click)="changeSort('role')" style="cursor:pointer">
            Role
            <i class="bi"
               [ngClass]="{
                 'bi-sort-up': sortColumn==='role' && sortDirection==='asc',
                 'bi-sort-down': sortColumn==='role' && sortDirection==='desc',
                 'bi-arrow-down-up': sortColumn!=='role'
               }"></i>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let user of paginatedUsers">
          <td>{{ user.id }}</td>
          <td>
            <i class="bi bi-person-circle me-1"></i>
            {{ user.name }}
          </td>
          <td>{{ user.email }}</td>
          <td>
            <span class="badge bg-primary" *ngIf="user.role==='Admin'">
              <i class="bi bi-shield-lock"></i> Admin
            </span>
            <span class="badge bg-secondary" *ngIf="user.role==='User'">
              <i class="bi bi-person"></i> User
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav>
    <ul class="pagination">
      <li class="page-item" [class.disabled]="page === 1">
        <button class="page-link" (click)="changePage(page-1)">
          <i class="bi bi-chevron-left"></i>
        </button>
      </li>

      <li
        class="page-item"
        *ngFor="let p of [].constructor(totalPages); let i = index"
        [class.active]="page === i+1"
      >
        <button class="page-link" (click)="changePage(i+1)">
          {{ i+1 }}
        </button>
      </li>

      <li class="page-item" [class.disabled]="page === totalPages">
        <button class="page-link" (click)="changePage(page+1)">
          <i class="bi bi-chevron-right"></i>
        </button>
      </li>
    </ul>
  </nav>

</div>
